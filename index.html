<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Ù…Ù†ØµØ© Ø²Ø¯ Ø¥ÙŠÙ…Ø§Ù†Ùƒ</title>
<meta name="theme-color" content="#0f6781"/>

<!-- Manifest (inline via Blob) -->
<link id="manifestLink" rel="manifest"/>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<style>
:root{
  --blue:#0f6781; --blue2:#2a7c92; --beige:#efe9dc; --gold:#d4a944; --ink:#0f1a20; --muted:#5c6a7a;
  --card:#ffffff; --border:#e6ecf2; --badge:#f7fafc;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%}
body{
  font-family: system-ui, -apple-system, "Noto Kufi Arabic", "Cairo", "Tajawal", Segoe UI, Roboto, sans-serif;
  color:var(--ink);
  background:
    radial-gradient(1200px 400px at 90% -10%, rgba(212,169,68,.10), transparent),
    radial-gradient(900px 500px at 10% -20%, rgba(15,103,129,.12), transparent),
    linear-gradient(180deg, #f7f5ef 0%, #ffffff 60%, #f7f5ef 100%);
}
.container{max-width:1200px;margin:0 auto;padding:14px}
a{color:inherit;text-decoration:none}

.header{position:sticky;top:0;z-index:40;backdrop-filter:blur(10px);background:rgba(255,255,255,.8);border-bottom:1px solid var(--border)}
.header-inner{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 0}
.left-logos{display:flex;align-items:center;gap:10px}
.logo{display:inline-flex;align-items:center;justify-content:center;border:1px solid var(--border);border-radius:12px;background:var(--badge);padding:6px;height:48px}
.logo.vision{width:100px}
.logo img, .logo svg{max-height:100%;max-width:100%}
.brand{display:flex;align-items:center;gap:10px}
.app-logo{width:52px;height:52px;border-radius:14px;background:var(--badge);border:1px solid var(--border);display:grid;place-items:center;padding:4px}
.app-logo svg{width:100%;height:100%}
.nav{display:flex;gap:6px;flex-wrap:wrap}
.nav a{padding:8px 12px;border-radius:12px;border:1px solid transparent}
.nav a:hover,.nav a.active{background:rgba(0,0,0,.04);border-color:var(--border)}

.audio-btn{border:1px solid var(--border);padding:8px 12px;border-radius:10px;background:#fff}

main{padding-bottom:80px}
.section{margin-top:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:14px}
.shadow{box-shadow:0 10px 30px rgba(0,0,0,.06)}
.grid{display:grid;gap:12px}
.cols-2{grid-template-columns:1fr 1fr}
.cols-3{grid-template-columns:repeat(3,1fr)}
.cols-4{grid-template-columns:repeat(4,1fr)}
@media(max-width:980px){.cols-2,.cols-3,.cols-4{grid-template-columns:1fr}}

.hero{display:grid;gap:16px;grid-template-columns:1.1fr 1fr;align-items:center;padding:16px;border:1px solid var(--border);border-radius:24px;background:linear-gradient(135deg, #0f6781 0%, #2a7c92 60%, rgba(212,169,68,.45) 100%);color:#fff}
.hero h1{margin:0 0 10px;font-size:28px}
.hero p{margin:0;color:#eaf7ff}
.hero .btns{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
.btn{border:none;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}
.btn-primary{background:var(--gold);color:#1a2228}
.btn-primary:hover{background:#c79b34}
.btn-ghost{background:transparent;border:1px dashed var(--border);color:#fff}
.verse-box{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.25);border-radius:18px;padding:16px;text-align:center;font-family:"Amiri","Scheherazade New",serif}
.verse-box .ayah{font-size:22px;line-height:1.9}
.kpis{display:flex;gap:10px;flex-wrap:wrap}
.kpi{flex:1 1 180px;background:#ffffff1a;border:1px solid rgba(255,255,255,.35);border-radius:12px;padding:10px}
.kpi b{display:block;font-size:18px}
.kpi span{font-size:12px}

.input,select,textarea{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:var(--card);color:var(--ink)}
.range{width:100%}
.small{font-size:12px;color:var(--muted)}
.badge{display:inline-block;padding:3px 8px;border-radius:999px;background:var(--badge);border:1px solid var(--border);font-size:12px}
.separator{height:1px;background:var(--border);margin:8px 0}
.notice{padding:10px;border:1px solid var(--border);background:#fffdf5;border-radius:12px}
.radar{padding:10px;background:var(--card);border:1px solid var(--border);border-radius:16px}

.footer{text-align:center;color:var(--muted);font-size:12px;padding:24px 0;border-top:1px solid var(--border);background:rgba(255,255,255,.8)}
.hide{display:none}
.breadcrumbs{font-size:13px;color:var(--muted);display:flex;gap:8px;align-items:center}
.breadcrumbs .dot{width:4px;height:4px;background:var(--muted);border-radius:50%}
</style>
</head>
<body>

<header class="header">
  <div class="container header-inner">
    <!-- ÙŠØ³Ø§Ø±: Ø§Ù„Ø±Ø¤ÙŠØ© + ØªÙ„Ø¨ÙŠØ© -->
    <div class="left-logos">
      <!-- Vision 2030 (SVG Ø®ÙÙŠÙØ› ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¨Ø¯Ø§Ù„Ù‡ Ø¨Ù€Base64 Ø§Ù„Ø±Ø³Ù…ÙŠ) -->
      <div class="logo vision" title="Vision 2030" id="visionLogo">
        <svg viewBox="0 0 220 60" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <text x="0" y="40" font-family="Tajawal,Arial" font-size="28" fill="#6b7280" font-weight="700">VISION 2030</text>
        </svg>
      </div>
      <!-- Talbiya -->
      <div class="logo" title="Talbiya" id="talbiyaLogo">
        <svg viewBox="0 0 160 60" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <text x="10" y="38" font-family="Tajawal,Arial" font-size="28" fill="#22a35a" font-weight="800">Talbiya</text>
        </svg>
      </div>
      <button id="audioBtn" class="audio-btn">ğŸ”Š ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ø§ÙˆØ©</button>
    </div>

    <!-- ÙŠÙ…ÙŠÙ†: Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ù†ØµØ© -->
    <div class="brand">
      <div class="app-logo" title="Ù…Ù†ØµØ© Ø²Ø¯ Ø¥ÙŠÙ…Ø§Ù†Ùƒ">
        <svg viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs><radialGradient id="g" cx="50%" cy="50%" r="60%">
            <stop offset="0%" stop-color="#FACC15" stop-opacity=".95"/>
            <stop offset="60%" stop-color="#60A5FA" stop-opacity=".9"/>
            <stop offset="100%" stop-color="#14B8A6" stop-opacity=".85"/>
          </radialGradient></defs>
          <rect width="256" height="256" rx="44" ry="44" fill="url(#g)"/>
          <circle cx="128" cy="128" r="86" fill="rgba(255,255,255,.15)"/>
          <text x="50%" y="57%" text-anchor="middle" font-family="Tajawal" font-size="120" fill="#0F172A">Ø²</text>
        </svg>
      </div>
      <nav class="nav" id="nav"></nav>
    </div>
  </div>
</header>

<!-- Ø§Ù„ØµÙˆØª (Ø¶Ø¹ Ù…Ù„ÙÙƒ Ø§Ù„Ø®Ø§Øµ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¥Ù† Ø£Ø±Ø¯Øª) -->
<audio id="recitation" loop preload="auto">
  <source src="audio/abdulbasit.mp3" type="audio/mpeg"/>
</audio>

<main class="container">

  <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <section id="page-home" class="page">
    <div class="hero shadow">
      <div>
        <h1>Ø¥ÙŠÙ…Ø§Ù†ÙŠ Ø§Ù„Ù…Ø¹Ø§ØµØ± â€” Ø²Ø¯ Ø¥ÙŠÙ…Ø§Ù†Ùƒ</h1>
        <p>Ù…Ù†ØµØ© Ø¹Ù…Ù„ÙŠØ© ØªØ¹Ø²Ù‘Ø² Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¹Ø¨Ø± Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ø³Ù†Ù‰ØŒ ÙˆØªØ±Ø¨Ø· ØªÙ‚Ø¯Ù‘Ù…Ùƒ Ø¨Ø³ÙÙ„Ù‘Ù… Ù‡Ø§ÙˆÙƒÙÙ†Ø²ØŒ Ù‡Ø±ÙÙ… Ù…Ø§Ø³Ù„ÙˆØŒ ÙˆØ¹Ø¬Ù„Ø© Ø§Ù„Ø­ÙŠØ§Ø© â€” Ø«Ù… ØªÙ…Ù†Ø­Ùƒ Ø®Ø·Ø© 14 ÙŠÙˆÙ…Ù‹Ø§ Ù…Ø³ØªÙ†Ø¯Ø© Ù„Ø¢ÙŠØ§Øª ÙˆØ­ÙƒÙ…Ø© Ù†ÙØ³ÙŠØ©.</p>
        <div class="btns">
          <a class="btn btn-primary" href="#/assessment">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¢Ù†</a>
          <a class="btn btn-ghost" href="#/vision2030">Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø±Ø¤ÙŠØ© 2030</a>
        </div>
        <div class="kpis" style="margin-top:12px">
          <div class="kpi"><b id="kpiFaith">â€”%</b><span>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† (Ù…ØªÙˆØ³Ø· Ø§Ù„Ø£Ø³Ù…Ø§Ø¡)</span></div>
          <div class="kpi"><b id="kpiHawkins">â€”</b><span>Ù…Ø³ØªÙˆÙ‰ Ø³ÙÙ„Ù‘Ù… Ù‡Ø§ÙˆÙƒÙÙ†Ø²</span></div>
          <div class="kpi"><b id="kpiMaslow">â€”</b><span>Ø·Ø¨Ù‚Ø© Ù…Ø§Ø³Ù„Ùˆ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span></div>
        </div>
      </div>
      <div class="verse-box">
        <div class="ayah">ï´¿ÙˆÙÙ„ÙÙ„Ù‘ÙÙ‡Ù Ø§Ù„Ø£ÙØ³Ù’Ù…ÙØ§Ø¡Ù Ø§Ù„Ù’Ø­ÙØ³Ù’Ù†ÙÙ‰ ÙÙØ§Ø¯Ù’Ø¹ÙÙˆÙ‡Ù Ø¨ÙÙ‡ÙØ§ï´¾</div>
        <div class="small">Ø§Ù„Ø£Ø¹Ø±Ø§Ù: 180</div>
      </div>
    </div>

    <div class="section grid cols-2">
      <div class="card">
        <h3>ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ</h3>
        <ol class="small" style="line-height:1.9;padding-right:18px">
          <li>Ù‚ÙŠÙ‘Ù… Ø¹Ù…Ù‚ Ø¥ÙŠÙ…Ø§Ù†Ùƒ (0â€“100) ÙÙŠ <b>Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ø³Ù†Ù‰</b> Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©.</li>
          <li>Ù†Ø­ØªØ³Ø¨ Ø§Ù„Ù…ØªÙˆØ³Ø· ÙˆÙ†ÙØ³Ù‚ÙØ·Ù‡ Ø¹Ù„Ù‰ <b>Ø³Ù„Ù‘Ù… Ù‡Ø§ÙˆÙƒÙÙ†Ø²</b> ÙˆÙ†Ø­Ø¯Ù‘Ø¯ Ø·Ø¨Ù‚Ø© <b>Ù…Ø§Ø³Ù„Ùˆ</b>.</li>
          <li>Ø§Ù…Ù„Ø£ <b>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­ÙŠØ§Ø©</b> (8 Ø¬ÙˆØ§Ù†Ø¨)ØŒ ÙØªÙØ¨Ù†Ù‰ <b>Ø®Ø±ÙŠØ·Ø© Ø·Ø±ÙŠÙ‚</b> Ù…Ù† 14 ÙŠÙˆÙ…Ù‹Ø§ Ø¨Ø¢ÙŠØ§Øª ÙˆØªÙ…Ø§Ø±ÙŠÙ† Ù†ÙØ³ÙŠØ©.</li>
        </ol>
      </div>
      <div class="card">
        <h3>Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­ÙŠØ§Ø©</h3>
        <div class="radar">
          <canvas id="radar" height="260"></canvas>
        </div>
        <div class="small" style="margin-top:6px;color:var(--muted)">Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† ØµÙØ­Ø© â€œØ§Ù„ØªÙ‚ÙŠÙŠÙ…â€ Ù„ØªØ±Ù‰ Ø§Ù„ØªØºÙŠÙ‘Ø± ÙÙˆØ±Ù‹Ø§.</div>
      </div>
    </div>
  </section>

  <!-- Ø§Ù„ØªÙ‚ÙŠÙŠÙ… -->
  <section id="page-assessment" class="page hide">
    <nav class="breadcrumbs"><a href="#/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a><span class="dot"></span><b>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†ÙŠ</b></nav>

    <div class="grid cols-2">
      <div class="card">
        <h3>Ù¡) ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø­Ø³Ù†Ù‰ (99 Ø§Ø³Ù…Ù‹Ø§)</h3>
        <p class="small" style="color:var(--muted)">Ø­Ø¯Ù‘Ø¯ Ø¹Ù…Ù‚ Ø¥ÙŠÙ…Ø§Ù†Ùƒ (0â€“100) Ù„ÙƒÙ„ Ø§Ø³Ù…. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª.</p>
        <div id="namesWrap" class="grid cols-2" style="margin-top:8px"></div>
        <div class="separator"></div>
        <button class="btn btn-primary" onclick="saveNames()">Ø­ÙØ¸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>
      </div>

      <div class="card">
        <h3>Ù¢) Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­ÙŠØ§Ø© (8 Ø¬ÙˆØ§Ù†Ø¨)</h3>
        <p class="small" style="color:var(--muted)">Ù‚ÙŠÙ‘Ù… Ø±Ø¶Ø§Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ (0â€“10) ÙÙŠ ÙƒÙ„ Ø¬Ø§Ù†Ø¨.</p>
        <div id="lifeWrap" class="grid cols-2" style="margin-top:8px"></div>
        <div class="separator"></div>
        <button class="btn btn-primary" onclick="saveLife()">Ø­ÙØ¸ Ø§Ù„Ø¹Ø¬Ù„Ø©</button>
      </div>
    </div>

    <div class="section grid cols-3">
      <div class="card">
        <h3>Ù£) Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ÙÙˆØ±ÙŠØ©</h3>
        <div class="kpis">
          <div class="kpi"><b id="faithPct">â€”%</b><span>Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø§Ù„Ø¹Ø§Ù…Ø©</span></div>
          <div class="kpi"><b id="hawkinsLevel">â€”</b><span>Ù…Ø³ØªÙˆÙ‰ Ù‡Ø§ÙˆÙƒÙÙ†Ø²</span></div>
          <div class="kpi"><b id="maslowTier">â€”</b><span>Ø·Ø¨Ù‚Ø© Ù…Ø§Ø³Ù„Ùˆ</span></div>
        </div>
        <p class="small" id="levelBlurb" style="margin-top:8px;color:var(--muted)"></p>
      </div>

      <div class="card">
        <h3>Ù¤) Ø¢ÙŠØ© Ù…ÙÙ„Ù‡ÙÙ…Ø©</h3>
        <div id="dailyAyah" class="verse-box" style="margin-top:6px"></div>
        <button class="btn" style="margin-top:8px" onclick="randomAyah()">Ø¢ÙŠØ© Ø£Ø®Ø±Ù‰</button>
      </div>

      <div class="card">
        <h3>Ù¥) ØªÙˆØµÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
        <ul id="quickTips" class="small" style="line-height:1.9;padding-right:18px"></ul>
      </div>
    </div>

    <div class="section">
      <a class="btn btn-primary" href="#/roadmap">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚ (14 ÙŠÙˆÙ…Ù‹Ø§)</a>
    </div>
  </section>

  <!-- Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚ -->
  <section id="page-roadmap" class="page hide">
    <nav class="breadcrumbs"><a href="#/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a><span class="dot"></span><b>Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚</b></nav>
    <div class="card">
      <h3>Ø®Ø·Ø© Ø´Ø®ØµÙŠØ© Ù„Ù…Ø¯Ø© 14 ÙŠÙˆÙ…Ù‹Ø§</h3>
      <p class="small" style="color:var(--muted)">Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†ØŒ Ù…Ø³ØªÙˆÙ‰ Ù‡Ø§ÙˆÙƒÙÙ†Ø²ØŒ Ø·Ø¨Ù‚Ø© Ù…Ø§Ø³Ù„ÙˆØŒ ÙˆØ¹Ø¬Ù„Ø© Ø§Ù„Ø­ÙŠØ§Ø©.</p>
      <div id="roadmapPlan" class="grid" style="margin-top:8px"></div>
      <div class="separator"></div>
      <button class="btn btn-primary" onclick="downloadPlan()">Ø­ÙØ¸ ÙƒÙ…Ù„Ù HTML (Ø§Ø·Ø¨Ø¹ Ø¥Ù„Ù‰ PDF)</button>
      <button class="btn btn-ghost" onclick="window.print()">Ø·Ø¨Ø§Ø¹Ø©</button>
    </div>
  </section>

  <!-- Ø±Ø¤ÙŠØ© 2030 -->
  <section id="page-vision2030" class="page hide">
    <nav class="breadcrumbs"><a href="#/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a><span class="dot"></span><b>Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø±Ø¤ÙŠØ© 2030</b></nav>
    <div class="grid cols-2">
      <div class="card">
        <h3>Ù…Ø­Ø§ÙˆØ± Ø§Ù„Ø§Ù†Ø³Ø¬Ø§Ù…</h3>
        <ul class="small" style="line-height:1.9;padding-right:18px">
          <li><b>ØªØ¹Ø²ÙŠØ² Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© ÙˆØ§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ©</b> â€” Ø§Ù„ÙˆØ³Ø·ÙŠØ©/Ø§Ù„ØªØ³Ø§Ù…Ø­/Ø§Ù„Ø¥ØªÙ‚Ø§Ù†/Ø§Ù„Ø¹Ø¯Ø§Ù„Ø©/Ø§Ù„Ù…Ø«Ø§Ø¨Ø±Ø©.</li>
          <li><b>ØªÙ…ÙƒÙŠÙ† Ø­ÙŠØ§Ø© Ø¹Ø§Ù…Ø±Ø© ÙˆØµØ­ÙŠØ©</b> â€” Ù†Ù…Ø· ØµØ­ÙŠØŒ Ø¬ÙˆØ¯Ø© Ø§Ù„Ø­ÙŠØ§Ø©ØŒ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ©ØŒ Ø«Ù‚Ø§ÙØ© ÙˆØªØ±ÙÙŠÙ‡ Ù‡Ø§Ø¯Ù.</li>
          <li><b>ØªÙ…ÙƒÙŠÙ† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ©</b> â€” Ø£Ø«Ø± ØºÙŠØ± Ø±Ø¨Ø­ÙŠ ÙˆØªÙ…ÙƒÙŠÙ† Ù„Ù„ÙØ±Ø¯ ÙˆØ§Ù„Ù…Ù†Ø¸Ù…Ø©.</li>
        </ul>
      </div>
      <div class="card">
        <h3>Ù…Ø¤Ø´Ø±Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚ÙŠØ§Ø³</h3>
        <ul class="small" style="line-height:1.9;padding-right:18px">
          <li>ØªØ­Ø³Ù† 3 Ø¬ÙˆØ§Ù†Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ ÙÙŠ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­ÙŠØ§Ø©.</li>
          <li>Ø§Ø±ØªÙØ§Ø¹ â€œÙ†Ø³Ø¨Ø© Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†â€ â‰¥ 10 Ù†Ù‚Ø§Ø· Ø®Ù„Ø§Ù„ Ø¯ÙˆØ±Ø©.</li>
          <li>Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ø³ØªÙˆÙ‰ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ø¹Ù„Ù‰ Ø³ÙÙ„Ù‘Ù… Ù‡Ø§ÙˆÙƒÙÙ†Ø².</li>
        </ul>
        <div class="notice small">Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø±Ø¨Ø· Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø¨Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ·ÙˆØ¹ ÙˆØ¬ÙˆØ¯Ø© Ø§Ù„Ø­ÙŠØ§Ø© Ù…Ø­Ù„ÙŠÙ‹Ø§.</div>
      </div>
    </div>
  </section>

  <!-- Ø¹Ù† Ø§Ù„Ù…Ù†ØµØ© -->
  <section id="page-about" class="page hide">
    <nav class="breadcrumbs"><a href="#/">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a><span class="dot"></span><b>Ø¹Ù† Ø§Ù„Ù…Ù†ØµØ©</b></nav>
    <div class="card">
      <h3>Ø¹Ù† â€œØ²Ø¯ Ø¥ÙŠÙ…Ø§Ù†Ùƒâ€</h3>
      <p class="small" style="color:var(--muted)">ØªØµÙ…ÙŠÙ… Ù‡Ø§Ø¯Ø¦ Ø­Ø¯ÙŠØ«ØŒ Ù…Ø¹ ØªÙ‚ÙŠÙŠÙ… Ø¥ÙŠÙ…Ø§Ù†ÙŠ Ù…ØªØµÙ„ Ø¨Ø³Ù„Ù‘Ù… Ù‡Ø§ÙˆÙƒÙÙ†Ø² ÙˆÙ‡Ø±Ù… Ù…Ø§Ø³Ù„Ùˆ ÙˆØ¹Ø¬Ù„Ø© Ø§Ù„Ø­ÙŠØ§Ø©ØŒ ÙˆØ®Ø±ÙŠØ·Ø© Ø·Ø±ÙŠÙ‚ Ø¹Ù…Ù„ÙŠØ© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø© ÙˆØ§Ù„Ø­ÙØ¸ØŒ ÙˆØªØ¬Ù‡ÙŠØ² PWA Ù„Ù„ØªØ«Ø¨ÙŠØª Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨.</p>
    </div>
  </section>

</main>

<footer class="footer">
  Â© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø´Ø±ÙƒØ© <b>ØªÙ„Ø¨ÙŠØ© Ù„Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±</b> â€” <span id="year"></span>
</footer>

<script>
/* ====== PWA: Manifest & Service Worker (inline) ====== */
const manifest = {
  name: "Ù…Ù†ØµØ© Ø²Ø¯ Ø¥ÙŠÙ…Ø§Ù†Ùƒ",
  short_name: "Ø²Ø¯ Ø¥ÙŠÙ…Ø§Ù†Ùƒ",
  start_url: "./?pwa=true",
  display: "standalone",
  lang: "ar",
  dir: "rtl",
  theme_color: "#0f6781",
  background_color: "#ffffff",
  icons: [
    {src:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 128 128'><rect rx='28' ry='28' width='128' height='128' fill='%230f6781'/><text x='64' y='84' text-anchor='middle' font-size='84' fill='white'>Ø²</text></svg>", sizes:"128x128", type:"image/svg+xml"},
    {src:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><rect rx='80' ry='80' width='512' height='512' fill='%230f6781'/><text x='256' y='320' text-anchor='middle' font-size='300' fill='white'>Ø²</text></svg>", sizes:"512x512", type:"image/svg+xml", purpose:"maskable any"}
  ]
};
(function attachManifest(){
  const link = document.getElementById('manifestLink');
  const url = URL.createObjectURL(new Blob([JSON.stringify(manifest)], {type:'application/manifest+json'}));
  link.href = url;
})();
(function registerSW(){
  if('serviceWorker' in navigator){
    const swCode = `
      const CACHE='iman-cache-v1';
      self.addEventListener('install',e=>{e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['./'])));self.skipWaiting();});
      self.addEventListener('activate',e=>self.clients.claim());
      self.addEventListener('fetch',e=>{e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request).then(res=>{const cp=res.clone();caches.open(CACHE).then(c=>c.put(e.request,cp));return res;}).catch(()=>caches.match('./'))))});
    `;
    const url = URL.createObjectURL(new Blob([swCode],{type:'text/javascript'}));
    navigator.serviceWorker.register(url).catch(()=>{});
  }
})();

/* ====== Navbar & Routing ====== */
const routes = [
  {hash:"#/", label:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"},
  {hash:"#/assessment", label:"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"},
  {hash:"#/roadmap", label:"Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚"},
  {hash:"#/vision2030", label:"Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø±Ø¤ÙŠØ© 2030"},
  {hash:"#/about", label:"Ø¹Ù† Ø§Ù„Ù…Ù†ØµØ©"}
];
const nav = document.getElementById('nav');
routes.forEach(r=>{
  const a = document.createElement('a');
  a.href = r.hash; a.textContent = r.label; a.setAttribute('data-route','');
  nav.appendChild(a);
});
function route(){
  const h = location.hash || "#/";
  document.querySelectorAll('.page').forEach(p=>p.classList.add('hide'));
  const id = h==="#/"?"page-home":
             h==="#/assessment"?"page-assessment":
             h==="#/roadmap"?"page-roadmap":
             h==="#/vision2030"?"page-vision2030":"page-about";
  document.getElementById(id).classList.remove('hide');
  document.querySelectorAll('[data-route]').forEach(a=>a.classList.toggle('active', a.getAttribute('href')===h));
  if(h==="#/assessment"){ buildNames(); buildLife(); randomAyah(); }
  if(h==="#/roadmap"){ renderRoadmap(); }
  if(h!=="#/"){ audioPauseSoft(); }
  window.scrollTo({top:0,behavior:'smooth'});
}
window.addEventListener('hashchange', route);

/* ====== Audio control ====== */
const audio = document.getElementById('recitation');
const audioBtn = document.getElementById('audioBtn');
let audioOn=false;
function audioPauseSoft(){ if(!audio.paused){ audio.pause(); audioOn=false; audioBtn.textContent='ğŸ”Š ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ø§ÙˆØ©'; } }
audioBtn.addEventListener('click', async ()=>{
  try{
    if(!audioOn){ await audio.play(); audioOn=true; audioBtn.textContent='ğŸ”‡ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªÙ„Ø§ÙˆØ©'; }
    else{ audio.pause(); audioOn=false; audioBtn.textContent='ğŸ”Š ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ø§ÙˆØ©'; }
  }catch(e){ alert('Ø¶Ø¹ Ù…Ù„Ù Ø§Ù„ØªÙ„Ø§ÙˆØ© ÙÙŠ audio/abdulbasit.mp3 Ø£Ùˆ Ø§Ø³Ù…Ø­ Ø¨Ø§Ù„ØªØ´ØºÙŠÙ„ Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­.'); }
});

/* ====== Data ====== */
const NAMES_99 = ["Ø§Ù„Ø±Ø­Ù…Ù†","Ø§Ù„Ø±Ø­ÙŠÙ…","Ø§Ù„Ù…Ù„Ùƒ","Ø§Ù„Ù‚Ø¯ÙˆØ³","Ø§Ù„Ø³Ù„Ø§Ù…","Ø§Ù„Ù…Ø¤Ù…Ù†","Ø§Ù„Ù…Ù‡ÙŠÙ…Ù†","Ø§Ù„Ø¹Ø²ÙŠØ²","Ø§Ù„Ø¬Ø¨Ø§Ø±","Ø§Ù„Ù…ØªÙƒØ¨Ø±","Ø§Ù„Ø®Ø§Ù„Ù‚","Ø§Ù„Ø¨Ø§Ø±Ø¦","Ø§Ù„Ù…ØµÙˆØ±","Ø§Ù„ØºÙØ§Ø±","Ø§Ù„Ù‚Ù‡Ø§Ø±","Ø§Ù„ÙˆÙ‡Ø§Ø¨","Ø§Ù„Ø±Ø²Ø§Ù‚","Ø§Ù„ÙØªØ§Ø­","Ø§Ù„Ø¹Ù„ÙŠÙ…","Ø§Ù„Ù‚Ø§Ø¨Ø¶","Ø§Ù„Ø¨Ø§Ø³Ø·","Ø§Ù„Ø®Ø§ÙØ¶","Ø§Ù„Ø±Ø§ÙØ¹","Ø§Ù„Ù…Ø¹Ø²","Ø§Ù„Ù…Ø°Ù„","Ø§Ù„Ø³Ù…ÙŠØ¹","Ø§Ù„Ø¨ØµÙŠØ±","Ø§Ù„Ø­ÙƒÙ…","Ø§Ù„Ø¹Ø¯Ù„","Ø§Ù„Ù„Ø·ÙŠÙ","Ø§Ù„Ø®Ø¨ÙŠØ±","Ø§Ù„Ø­Ù„ÙŠÙ…","Ø§Ù„Ø¹Ø¸ÙŠÙ…","Ø§Ù„ØºÙÙˆØ±","Ø§Ù„Ø´ÙƒÙˆØ±","Ø§Ù„Ø¹Ù„ÙŠ","Ø§Ù„ÙƒØ¨ÙŠØ±","Ø§Ù„Ø­ÙÙŠØ¸","Ø§Ù„Ù…Ù‚ÙŠØª","Ø§Ù„Ø­Ø³ÙŠØ¨","Ø§Ù„Ø¬Ù„ÙŠÙ„","Ø§Ù„ÙƒØ±ÙŠÙ…","Ø§Ù„Ø±Ù‚ÙŠØ¨","Ø§Ù„Ù…Ø¬ÙŠØ¨","Ø§Ù„ÙˆØ§Ø³Ø¹","Ø§Ù„Ø­ÙƒÙŠÙ…","Ø§Ù„ÙˆØ¯ÙˆØ¯","Ø§Ù„Ù…Ø¬ÙŠØ¯","Ø§Ù„Ø¨Ø§Ø¹Ø«","Ø§Ù„Ø´Ù‡ÙŠØ¯","Ø§Ù„Ø­Ù‚","Ø§Ù„ÙˆÙƒÙŠÙ„","Ø§Ù„Ù‚ÙˆÙŠ","Ø§Ù„Ù…ØªÙŠÙ†","Ø§Ù„ÙˆÙ„ÙŠ","Ø§Ù„Ø­Ù…ÙŠØ¯","Ø§Ù„Ù…Ø­ØµÙŠ","Ø§Ù„Ù…Ø¨Ø¯Ø¦","Ø§Ù„Ù…Ø¹ÙŠØ¯","Ø§Ù„Ù…Ø­ÙŠÙŠ","Ø§Ù„Ù…Ù…ÙŠØª","Ø§Ù„Ø­ÙŠ","Ø§Ù„Ù‚ÙŠÙˆÙ…","Ø§Ù„ÙˆØ§Ø¬Ø¯","Ø§Ù„Ù…Ø§Ø¬Ø¯","Ø§Ù„ÙˆØ§Ø­Ø¯","Ø§Ù„Ø§Ø­Ø¯","Ø§Ù„ØµÙ…Ø¯","Ø§Ù„Ù‚Ø§Ø¯Ø±","Ø§Ù„Ù…Ù‚ØªØ¯Ø±","Ø§Ù„Ù…Ù‚Ø¯Ù…","Ø§Ù„Ù…Ø¤Ø®Ø±","Ø§Ù„Ø£ÙˆÙ„","Ø§Ù„Ø£Ø®Ø±","Ø§Ù„Ø¸Ø§Ù‡Ø±","Ø§Ù„Ø¨Ø§Ø·Ù†","Ø§Ù„ÙˆØ§Ù„ÙŠ","Ø§Ù„Ù…ØªØ¹Ø§Ù„ÙŠ","Ø§Ù„Ø¨Ø±","Ø§Ù„ØªÙˆØ§Ø¨","Ø§Ù„Ù…Ù†ØªÙ‚Ù…","Ø§Ù„Ø¹ÙÙˆ","Ø§Ù„Ø±Ø¤ÙˆÙ","Ù…Ø§Ù„Ùƒ Ø§Ù„Ù…Ù„Ùƒ","Ø°Ùˆ Ø§Ù„Ø¬Ù„Ø§Ù„ ÙˆØ§Ù„Ø¥ÙƒØ±Ø§Ù…","Ø§Ù„Ù…Ù‚Ø³Ø·","Ø§Ù„Ø¬Ø§Ù…Ø¹","Ø§Ù„ØºÙ†ÙŠ","Ø§Ù„Ù…ØºÙ†ÙŠ","Ø§Ù„Ù…Ø§Ù†Ø¹","Ø§Ù„Ø¶Ø§Ø±","Ø§Ù„Ù†Ø§ÙØ¹","Ø§Ù„Ù†ÙˆØ±","Ø§Ù„Ù‡Ø§Ø¯ÙŠ","Ø§Ù„Ø¨Ø¯ÙŠØ¹","Ø§Ù„Ø¨Ø§Ù‚ÙŠ","Ø§Ù„ÙˆØ§Ø±Ø«","Ø§Ù„Ø±Ø´ÙŠØ¯","Ø§Ù„ØµØ¨ÙˆØ±"];
const LIFE_AREAS = ["Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†/Ø§Ù„Ø±ÙˆØ­","Ø§Ù„ØµØ­Ø©","Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©","Ø§Ù„Ø¹Ù„Ø§Ù‚Ø§Øª","Ø§Ù„Ø¹Ù…Ù„/Ø§Ù„Ù…Ø§Ù„","Ø§Ù„Ø¹Ù„Ù…/Ø§Ù„ØªØ¹Ù„Ù…","Ø§Ù„Ø¹Ø·Ø§Ø¡/Ø§Ù„Ø£Ø«Ø±","Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª/Ø§Ù„Ù…ØªØ¹Ø©"];

const K = {names:"iman_names", life:"iman_life"};
function load(k){ try{return JSON.parse(localStorage.getItem(k))}catch{return null} }
function save(k,v){ localStorage.setItem(k, JSON.stringify(v)); }

let namesScores = load(K.names) || Object.fromEntries(NAMES_99.map(n=>[n,50]));
let lifeScores  = load(K.life)  || Object.fromEntries(LIFE_AREAS.map(n=>[n,5]));

/* ====== Helpers ====== */
function byId(id){ return document.getElementById(id) }
function el(tag, attrs={}, children=[]){
  const e = document.createElement(tag);
  Object.entries(attrs).forEach(([k,v])=>{
    if(k==="class") e.className=v; else if(k==="html") e.innerHTML=v; else e.setAttribute(k,v);
  });
  (Array.isArray(children)?children:[children]).filter(Boolean).forEach(c=> e.appendChild(c));
  return e;
}
function avg(vals){ return vals.reduce((a,b)=>a+b,0)/Math.max(vals.length,1); }

/* ====== Build UI ====== */
function buildNames(){
  const wrap = byId('namesWrap'); wrap.innerHTML="";
  NAMES_99.forEach(name=>{
    const val = namesScores[name] ?? 50;
    wrap.appendChild(el("div",{class:"card"},[
      el("div",{class:"row",html:`<b>${name}</b> <span class="badge" style="float:left">${val}%</span>`}),
      el("input",{type:"range",min:"0",max:"100",value:String(val),class:"range",oninput:`updateName('${name}', this.value, this.previousElementSibling.querySelector('.badge'))`})
    ]));
  });
}
function updateName(name,val,b){
  namesScores[name]=Number(val); b.textContent=val+"%";
}
function saveNames(){ save(K.names, namesScores); refreshAll(); alert("ØªÙ… Ø­ÙØ¸ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ù…Ø§Ø¡."); }

function buildLife(){
  const wrap = byId('lifeWrap'); wrap.innerHTML="";
  LIFE_AREAS.forEach(area=>{
    const val = lifeScores[area] ?? 5;
    wrap.appendChild(el("div",{class:"card"},[
      el("div",{class:"row",html:`<b>${area}</b> <span class="badge" style="float:left">${val}/10</span>`}),
      el("input",{type:"range",min:"0",max:"10",value:String(val),class:"range",oninput:`updateLife('${area}', this.value, this.previousElementSibling.querySelector('.badge'))`})
    ]));
  });
}
function updateLife(area,val,b){
  lifeScores[area]=Number(val); b.textContent=val+"/10";
}
function saveLife(){ save(K.life, lifeScores); drawRadar(); refreshAll(); alert("ØªÙ… Ø­ÙØ¸ Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­ÙŠØ§Ø©."); }

/* ====== Hawkins & Maslow Mapping ====== */
const SCALES = {
  hawkins(pct){
    if(pct < 20) return {level:"Ø®Ø¬Ù„/Ø¹Ø§Ø±", code:20, tone:"Ø§Ù†ÙƒÙ…Ø§Ø´", tip:"Ø§Ø¨Ø¯Ø£ Ø¨Ø±Ø­Ù…Ø© Ø§Ù„Ù„Ù‡ (Ø§Ù„Ø±Ø­Ù…Ù†/Ø§Ù„Ø±Ø­ÙŠÙ…) ÙˆØªÙ…Ø§Ø±ÙŠÙ† Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø°Ø§Øª."};
    if(pct < 35) return {level:"Ø°Ù†Ø¨/Ø£Ø³Ù‰", code:75, tone:"Ù…Ù†Ø®ÙØ¶", tip:"ØªÙˆØ¨Ø© + Ø§Ù…ØªÙ†Ø§Ù† ÙŠÙˆÙ…ÙŠ + (Ù‚ÙÙ„ ÙŠØ§ Ø¹Ø¨Ø§Ø¯ÙŠ Ø§Ù„Ø°ÙŠÙ† Ø£Ø³Ø±ÙÙˆØ§...)."};
    if(pct < 50) return {level:"Ø®ÙˆÙ/Ù‚Ù„Ù‚", code:100, tone:"Ù…ØªØ°Ø¨Ø°Ø¨", tip:"ØªÙˆÙƒÙ‘Ù„ Ø¹Ù…Ù„ÙŠ: (ÙˆÙ…Ù† ÙŠØªÙˆÙƒÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù„Ù‡ ÙÙ‡Ùˆ Ø­Ø³Ø¨Ù‡)."};
    if(pct < 60) return {level:"Ø´Ø¬Ø§Ø¹Ø©", code:200, tone:"ØªØ­ÙˆÙ„", tip:"Ø¹Ø§Ø¯Ø© ØµØºÙŠØ±Ø© Ù…Ø³ØªÙ…Ø±Ø© + Ù…ØªØ§Ø¨Ø¹Ø© Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©."};
    if(pct < 70) return {level:"Ù‚Ø¨ÙˆÙ„/Ø­ÙŠØ§Ø¯", code:300, tone:"Ø§ØªØ²Ø§Ù†", tip:"Ø±ÙˆØªÙŠÙ† Ø°ÙƒØ± ÙˆØ§Ù…ØªÙ†Ø§Ù† + Ø¹Ù…Ù„ Ù†Ø§ÙØ¹ ÙŠÙˆÙ…ÙŠ."};
    if(pct < 80) return {level:"Ù…Ø­Ø¨Ø©/Ø¨Ù‡Ø¬Ø©", code:500, tone:"Ø§ØªØ³Ø§Ø¹", tip:"ØªÙƒØ«ÙŠØ± Ø§Ù„Ø¹Ø·Ø§Ø¡ ÙˆØ§Ù„Ù„Ø·Ù Ø§Ù„Ø®ÙÙŠ + ØµØ­Ø¨Ø© ØµØ§Ù„Ø­Ø©."};
    if(pct < 90) return {level:"Ø³Ù„Ø§Ù…", code:600, tone:"Ø³ÙƒÙŠÙ†Ø©", tip:"Ø®Ù„ÙˆØ© ÙŠÙˆÙ…ÙŠØ© Ù‚ØµÙŠØ±Ø© Ù…Ø¹ ØªØ¯Ø¨Ø±."};
    return {level:"Ù†ÙˆØ±/Ø³ÙƒÙˆÙ†", code:700, tone:"ØµÙØ§Ø¡", tip:"ØªØ«Ø¨ÙŠØª Ø§Ù„Ø®Ù„ÙˆØ© ÙˆØ®Ø¯Ù…Ø© Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø¨Ø¥Ø®Ù„Ø§Øµ."};
  },
  maslow(avgLife, pct){
    if(avgLife < 3) return "ÙØ³ÙŠÙˆÙ„ÙˆØ¬ÙŠ/Ø£Ù…Ø§Ù†";
    if(avgLife < 5) return "Ø§Ù†ØªÙ…Ø§Ø¡/Ø¹Ù„Ø§Ù‚Ø§Øª";
    if(avgLife < 7) return "ØªÙ‚Ø¯ÙŠØ±/Ø¥Ù†Ø¬Ø§Ø²";
    return "ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø°Ø§Øª (+ Ø³Ù…Ùˆ Ø¨Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†)";
  }
};

/* ====== KPIs & Tips ====== */
function computeFaithPct(){ return Math.round(avg(Object.values(namesScores))); }
function computeLifeAvg(){ return avg(Object.values(lifeScores)); }

function refreshAll(){
  const pct = computeFaithPct();
  const haw = SCALES.hawkins(pct);
  const lifeAvg = computeLifeAvg();
  const mas = SCALES.maslow(lifeAvg, pct);

  // Home KPIs
  byId('kpiFaith').textContent = pct+"%";
  byId('kpiHawkins').textContent = haw.level;
  byId('kpiMaslow').textContent = mas;

  // Assessment KPIs
  byId('faithPct').textContent = pct+"%";
  byId('hawkinsLevel').textContent = haw.level+" ("+haw.code+")";
  byId('maslowTier').textContent = mas;
  byId('levelBlurb').textContent = "Ù†Ø¨Ø±Ø© Ø§Ù„ÙˆØ¹ÙŠ: "+haw.tone+" â€” ØªÙˆØµÙŠØ©: "+haw.tip;

  // Tips
  buildQuickTips(pct, haw, lifeScores);
}

function buildQuickTips(pct, haw, life){
  const ul = byId('quickTips'); ul.innerHTML="";
  const worst = Object.entries(life).sort((a,b)=>a[1]-b[1]).slice(0,2).map(x=>x[0]);
  const anchorName = pct<60 ? "Ø§Ù„Ø±Ø­Ù…Ù†" : (pct<75 ? "Ø§Ù„Ù„Ø·ÙŠÙ" : "Ø§Ù„Ø­ÙƒÙŠÙ…");
  const tips = [
    `Ø°ÙƒØ± ÙŠÙˆÙ…ÙŠ: "ÙŠØ§ ${anchorName}" 100 Ù…Ø±Ø© Ø¨Ø®Ø´ÙˆØ¹.`,
    "Ø¬Ù„Ø³Ø© Ø§Ù…ØªÙ†Ø§Ù†: 3 Ø£Ø´ÙŠØ§Ø¡ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ….",
    "Ù„Ø·Ù Ø®ÙÙŠ Ù„Ø´Ø®Øµ ÙˆØ§Ø­Ø¯ Ø§Ù„ÙŠÙˆÙ….",
    "ØªØ¯Ø¨Ø± 10 Ø¯Ù‚Ø§Ø¦Ù‚ (Ù‚ØµØ§Ø± Ø§Ù„Ø³ÙˆØ± Ù…Ø¹ ØªÙØ³ÙŠØ±).",
    "ØªÙ†ÙÙ‘Ø³ 4-4-6 Ø®Ù…Ø³ Ù…Ø±Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„ØªÙˆØªØ±."
  ];
  worst.forEach(w=> tips.unshift(`ØªØ±ÙƒÙŠØ² Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¹Ù„Ù‰: <b>${w}</b> Ø¨Ø®Ø·ÙˆØ© ØµØºÙŠØ±Ø© ÙŠÙˆÙ…ÙŠØ©.`));
  tips.slice(0,5).forEach(t=>{const li=document.createElement('li'); li.innerHTML=t; ul.appendChild(li);});
}

/* ====== Ayat ====== */
const AYAT = [
  {text:"ï´¿ÙˆÙÙ…ÙÙ† ÙŠÙØªÙÙˆÙÙƒÙ‘ÙÙ„Ù’ Ø¹ÙÙ„ÙÙ‰ Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙÙÙ‡ÙÙˆÙ Ø­ÙØ³Ù’Ø¨ÙÙ‡Ùï´¾", ref:"Ø§Ù„Ø·Ù„Ø§Ù‚: 3"},
  {text:"ï´¿Ø¥ÙÙ†Ù‘Ù Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§ï´¾", ref:"Ø§Ù„Ø´Ø±Ø­: 6"},
  {text:"ï´¿Ù‚ÙÙ„Ù’ ÙŠÙØ§ Ø¹ÙØ¨ÙØ§Ø¯ÙÙŠÙ Ø§Ù„Ù‘ÙØ°ÙÙŠÙ†Ù Ø£ÙØ³Ù’Ø±ÙÙÙÙˆØ§...ï´¾", ref:"Ø§Ù„Ø²Ù…Ø±: 53"},
  {text:"ï´¿Ø§Ø¯Ù’Ø¹ÙÙˆÙ†ÙÙŠ Ø£ÙØ³Ù’ØªÙØ¬ÙØ¨Ù’ Ù„ÙÙƒÙÙ…Ù’ï´¾", ref:"ØºØ§ÙØ±: 60"},
  {text:"ï´¿ÙˆÙÙ‚ÙÙ„ Ø±Ù‘ÙØ¨Ù‘Ù Ø²ÙØ¯Ù’Ù†ÙÙŠ Ø¹ÙÙ„Ù’Ù…Ù‹Ø§ï´¾", ref:"Ø·Ù‡: 114"}
];
function randomAyah(){
  const a = AYAT[Math.floor(Math.random()*AYAT.length)];
  byId('dailyAyah').innerHTML = `<div class="ayah">${a.text}</div><div class="small">${a.ref}</div>`;
}

/* ====== Radar ====== */
let radar;
function drawRadar(){
  const ctx = byId('radar').getContext('2d');
  const labels = LIFE_AREAS;
  const data = labels.map(l=> lifeScores[l]);
  if(radar) radar.destroy();
  radar = new Chart(ctx, {
    type:'radar',
    data:{ labels, datasets:[{label:'Ø¹Ø¬Ù„Ø© Ø§Ù„Ø­ÙŠØ§Ø©', data, fill:true, borderWidth:2}] },
    options:{ responsive:true, plugins:{legend:{display:false}}, scales:{r:{suggestedMin:0,suggestedMax:10,ticks:{stepSize:2}}}}
  });
}

/* ====== Roadmap (14 ÙŠÙˆÙ…Ù‹Ø§) ====== */
function roadmapBlocks(pct, haw, life){
  const lowAreas = Object.entries(life).sort((a,b)=>a[1]-b[1]).slice(0,3).map(x=>x[0]);
  const anchorName = pct<60 ? "Ø§Ù„Ø±Ø­Ù…Ù†" : (pct<75 ? "Ø§Ù„Ù„Ø·ÙŠÙ" : "Ø§Ù„Ø­ÙƒÙŠÙ…");
  const anchorZikr = `Ø°ÙƒØ± ÙŠÙˆÙ…ÙŠ: "ÙŠØ§ ${anchorName}" 100 Ù…Ø±Ø©`;
  const anchorAyah = pct<50 ? "ï´¿ÙˆÙ…Ù† ÙŠØªÙˆÙƒÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù„Ù‡ ÙÙ‡Ùˆ Ø­Ø³Ø¨Ù‡ï´¾" : "ï´¿ÙˆÙ‚Ù„ Ø±Ø¨ Ø²Ø¯Ù†ÙŠ Ø¹Ù„Ù…Ø§ï´¾";
  const items=[];
  for(let d=1; d<=14; d++){
    const area = lowAreas[d % lowAreas.length];
    items.push({
      title:`Ø§Ù„ÙŠÙˆÙ… ${d}: ${area}`,
      desc:[anchorZikr, `Ø¢ÙŠØ©: ${anchorAyah}`, `Ø®Ø·ÙˆØ© ${area}: 10â€“20 Ø¯Ù‚ÙŠÙ‚Ø©`, "ØªØ­ÙˆÙŠÙ„ ÙÙƒØ±Ø© Ù…Ø²Ø¹Ø¬Ø© Ù„Ø¨Ø¯ÙŠÙ„ ÙˆØ§Ù‚Ø¹ÙŠ", "Ù„Ø·Ù Ø®ÙÙŠ Ù„Ø´Ø®Øµ ÙˆØ§Ø­Ø¯"].join(" â€” ")
    });
  }
  items.push({title:"Ù…Ø±Ø§Ø¬Ø¹Ø© Ø®ÙÙŠÙØ©",desc:"Ù‚ÙŠÙ‘Ù… Ø§Ù„ØªØ²Ø§Ù…Ùƒ (0â€“10) ÙˆØ¹Ø¯Ù‘Ù„ Ø§Ù„Ø®Ø·Ø©."});
  items.push({title:"ØªØ«Ø¨ÙŠØª Ø¹Ø§Ø¯Ø©",desc:"Ø§Ø®ØªØ± Ø¹Ø§Ø¯Ø© ÙˆØ§Ø­Ø¯Ø© Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± 30 ÙŠÙˆÙ…Ù‹Ø§."});
  return items;
}
function renderRoadmap(){
  const pct = computeFaithPct();
  const haw = SCALES.hawkins(pct);
  const host = byId('roadmapPlan'); host.innerHTML="";
  roadmapBlocks(pct, haw, lifeScores).forEach(it=>{
    host.appendChild(el("label",{class:"card",html:`<div style="display:flex;gap:10px;align-items:flex-start">
      <input type="checkbox" style="margin-top:6px"/>
      <div><b>${it.title}</b><div class="small" style="color:var(--muted)">${it.desc}</div></div></div>`}));
  });
}
function downloadPlan(){
  const html = `
<!doctype html><meta charset="utf-8"><title>Ø®Ø·Ø© Ø²Ø¯ Ø¥ÙŠÙ…Ø§Ù†Ùƒ (14 ÙŠÙˆÙ…Ù‹Ø§)</title>
<style>body{font-family:system-ui,"Noto Kufi Arabic";direction:rtl;padding:20px} .task{margin:8px 0;padding:10px;border:1px solid #ddd;border-radius:10px}</style>
<h2>Ø®Ø·Ø© Ø²Ø¯ Ø¥ÙŠÙ…Ø§Ù†Ùƒ (14 ÙŠÙˆÙ…Ù‹Ø§)</h2>
${byId('roadmapPlan').innerHTML}
<footer style="margin-top:16px;color:#777;font-size:12px">Â© Ø´Ø±ÙƒØ© ØªÙ„Ø¨ÙŠØ© Ù„Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±</footer>`;
  const blob = new Blob([html], {type:"text/html"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = "iman-roadmap.html"; a.click();
}

/* ====== Init ====== */
function initNav(){
  const links = [
    {hash:"#/", label:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"},
    {hash:"#/assessment", label:"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"},
    {hash:"#/roadmap", label:"Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚"},
    {hash:"#/vision2030", label:"Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø±Ø¤ÙŠØ© 2030"},
    {hash:"#/about", label:"Ø¹Ù† Ø§Ù„Ù…Ù†ØµØ©"}
  ];
  // (ØªÙ… Ø¨Ù†Ø§Ø¡Ù‡Ø§ Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©)
}
function go(h){ location.hash = h; }
function routeInit(){
  const h = location.hash || "#/";
  document.querySelectorAll('.page').forEach(p=>p.classList.add('hide'));
  document.getElementById(h==="#/"?"page-home":h==="#/assessment"?"page-assessment":h==="#/roadmap"?"page-roadmap":h==="#/vision2030"?"page-vision2030":"page-about").classList.remove('hide');
  document.querySelectorAll('[data-route]').forEach(a=>a.classList.toggle('active', a.getAttribute('href')=== (location.hash||"#/")));
  if(h==="#/assessment"){ buildNames(); buildLife(); randomAyah(); }
  if(h==="#/roadmap"){ renderRoadmap(); }
}
window.addEventListener('hashchange', route);
function route(){ routeInit(); }
document.getElementById('year').textContent = new Date().getFullYear();
drawRadar(); refreshAll(); routeInit(); randomAyah();

/* ====== (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø´Ø¹Ø§Ø±ÙŠ Ø§Ù„Ø±Ø¤ÙŠØ©/ØªÙ„Ø¨ÙŠØ© Ø¨ØµÙˆØ± Base64 Ø§Ù„Ø±Ø³Ù…ÙŠØ© ======
Ø¶Ø¹ Ø³Ø·Ø±ÙŠÙ† Ù…Ø«Ù„ Ø§Ù„Ø¢ØªÙŠ Ø¨Ø¹Ø¯ ØªÙˆÙÙŠØ± Ø§Ù„Ù€Base64 Ù„Ø¯ÙŠÙƒ:
document.getElementById('visionLogo').innerHTML = '<img alt="Vision 2030" src="data:image/png;base64,PUT_YOUR_VISION2030_BASE64_HERE" />';
document.getElementById('talbiyaLogo').innerHTML = '<img alt="Talbiya" src="data:image/png;base64,PUT_TALBIYA_BASE64_HERE" />';
======================================================================= */
</script>

</body>
</html>
