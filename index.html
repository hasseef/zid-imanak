<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>ููุตุฉ ุฅููุงูู</title>
<meta name="theme-color" content="#0f6781" />

<style>
  :root{
    --blue:#0f6781; --blue-2:#2a7c92; --beige:#e9dec7; --gold:#d4a944; --ink:#0f2a32;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Kufi Arabic','Cairo',sans-serif;color:#1f2937;background:linear-gradient(#f6f1e6,#fff)}
  a,button{cursor:pointer}
  .container{max-width:1100px;margin:0 auto;padding:0 16px}
  .shadow{box-shadow:0 8px 24px rgba(0,0,0,.06)}
  .card{background:#fff;border:1px solid #eef0f2;border-radius:18px}
  .btn{border:none;border-radius:12px;padding:12px 20px;font-weight:800}
  .btn-primary{background:var(--gold);color:#1c2a2f}
  .btn-primary:hover{background:#c79b34}
  .btn-ghost{background:transparent;color:#334155;border:1px solid #e5e7eb}
  .header{position:sticky;top:0;z-index:50;backdrop-filter:blur(10px);background:rgba(255,255,255,.8);border-bottom:1px solid #eef0f2}
  .nav{display:flex;gap:10px;flex-wrap:wrap}
  .nav button{padding:10px 14px;border-radius:12px;border:1px solid transparent;background:transparent}
  .nav button.active{background:rgba(212,169,68,.15);color:var(--blue);border-color:rgba(212,169,68,.25)}
  .grid{display:grid;gap:18px}
  .grid-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  .grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
  .grid-4{grid-template-columns:repeat(4,minmax(0,1fr))}
  @media(max-width:900px){.grid-2,.grid-3,.grid-4{grid-template-columns:1fr}}
  .hero{
    border-radius:24px;overflow:hidden;color:#fff;
    background:linear-gradient(135deg,var(--blue),var(--blue-2) 60%,rgba(212,169,68,.5))
  }
  .hero .inner{padding:56px 22px;text-align:center}
  h1{margin:0;font-size:clamp(24px,4vw,42px);line-height:1.5;font-weight:900}
  .muted{color:#6b7280}
  .section{margin:38px 0}
  .list{padding-right:18px;margin:10px 0}
  .list li{margin:8px 0}
  .footer{border-top:1px solid #eef0f2;background:rgba(255,255,255,.8)}
  .brand-right{display:flex;align-items:center;gap:10px;font-weight:900}
  .brand-box{width:44px;height:44px;border-radius:14px;background:var(--blue);color:#fff;display:grid;place-items:center;font-weight:800}
  .logos{display:flex;align-items:center;gap:12px}
  .tag{border:1px solid #e5e7eb;padding:4px 8px;border-radius:8px;font-size:12px}
  .small{font-size:12px}
  .center{text-align:center}
  .hidden{display:none}
  .range{accent-color:var(--gold);width:100%}
  .pill{border-radius:12px;padding:10px 12px;border:1px solid #e5e7eb;background:#fff}
  .warn{color:#b45309;background:#fffbeb;border:1px solid #fef3c7;padding:10px;border-radius:10px}
  .ok{color:#065f46;background:#ecfdf5;border:1px solid #a7f3d0;padding:10px;border-radius:10px}
  .chart{height:320px;border:1px solid #eef0f2;border-radius:16px;padding:12px;background:#fff}
  .bar{height:32px;margin:8px 0;background:#f1f5f9;border-radius:999px;position:relative;overflow:hidden}
  .bar > span{position:absolute;left:0;top:0;bottom:0;background:var(--gold)}
  .ticks{display:flex;justify-content:space-between;font-size:12px;color:#64748b}
  .area{position:relative;height:180px;background:linear-gradient(180deg,rgba(212,169,68,.6),rgba(42,124,146,.2));border-radius:12px}
  .area::after{content:'';position:absolute;inset:0;background:repeating-linear-gradient( to right, transparent, transparent 30px, rgba(0,0,0,.04) 31px);}
  .legend{display:flex;justify-content:space-between;font-size:12px;color:#475569;margin-top:8px}
  .partners{display:grid;grid-template-columns:repeat(6,1fr);gap:12px}
  @media(max-width:900px){.partners{grid-template-columns:repeat(3,1fr)}}
  .partner{height:80px;border:1px solid #e5e7eb;border-radius:12px;display:grid;place-items:center;color:#64748b;font-weight:700;background:#fff}
  .sr{position:absolute;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}
</style>
</head>
<body>

<header class="header">
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;padding:10px 0;">
    <div class="brand-right">
      <div class="brand-box">ุฅ</div><span>ุฅููุงูู</span>
    </div>

    <nav class="nav" id="nav"></nav>

    <div class="logos">
      <!-- ุจุฏุงุฆู SVG ุฏุงุฎููุฉ ููุดุนุงุฑุงุช (ูููู ุงุณุชุจุฏุงููุง ุจุตูุฑ PNG ุงูุฑุณููุฉ ูู ุฑุบุจุช) -->
      <div title="ุฑุคูุฉ ุงูุณุนูุฏูุฉ 2030" class="tag" id="visionLogo">
        <!-- Vision 2030 SVG placeholder -->
        <svg width="84" height="22" viewBox="0 0 200 50" aria-hidden="true">
          <text x="0" y="16" font-size="16" fill="#6b7280" font-weight="700">VISION 2030</text>
        </svg>
      </div>
      <div title="ูุจุงุฏุฑุฉ ุชูุจูุฉ" class="tag" id="talbiyaLogo">
        <!-- Talbiya SVG placeholder -->
        <svg width="70" height="22" viewBox="0 0 160 50" aria-hidden="true">
          <text x="0" y="16" font-size="16" fill="#22a35a" font-weight="700">Talbiya</text>
        </svg>
      </div>
      <button id="audioBtn" class="btn-ghost" style="padding:8px 12px;border-radius:10px">
        ๐ ุชุดุบูู ุงูุชูุงูุฉ
      </button>
    </div>
  </div>
</header>

<!-- ุงูุตูุช: ุถุน ููู ุนุจุฏุงูุจุงุณุท ููุง ูุงุญููุง ููุงู src -->
<audio id="recitation" loop preload="auto">
  <source src="audio/abdulbasit.mp3" type="audio/mpeg" />
</audio>

<main class="container" style="padding-bottom:60px">
  <!-- ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ -->
  <section class="section" data-route="home">
    <div class="hero shadow">
      <div class="inner">
        <h1>ุงุจุฏุฃ ุฑุญูุชู ูุญู ูุนุฑูุฉ ููุณู ูู ุฎูุงู ุฃุณูุงุก ุงููู ุงูุญุณูู</h1>
        <p class="muted" style="max-width:700px;margin:12px auto 0">
          ูุณุงุญุฉ ุฅููุงููุฉ ุนูููุฉ ุชุณุงุนุฏู ุนูู ุงููุนู ุจุฐุงุชู ูุชุญุณูู ุณูููู ุงููููู ูุฎูู ุงุชุณุงู ุฑูุญู ูุน ูุนุงูู ุงูุฃุณูุงุก ุงูุญุณูู.
        </p>
        <div style="margin-top:18px">
          <button class="btn btn-primary" id="startAssessment">ุงุจุฏุฃ ุงูุชูููู ุงูุขู</button>
        </div>
        <div style="margin-top:24px;font-weight:700;font-size:20px">ูุง ุธููููููู ุจูุฑูุจูู ุงูุนูุงููููููู</div>
      </div>
    </div>

    <div class="section grid grid-2">
      <div class="card shadow" style="padding:18px">
        <h3 style="margin:0 0 10px;font-weight:800">ุนู ุงูููุตุฉ</h3>
        <p class="muted" style="line-height:1.9">
          ููุตุฉ ุฅููุงูู ุชูุฒุฌ ุจูู ุงูุฑูุญุงููุฉ ูุงูุญุฏุงุซุฉ ูุชูููุฉ ุงููุนู ุงูุฐุงุชู ุนุจุฑ ุฃุฏูุงุช ุชูููู ููุชุงุฆุฌ ุนูููุฉ ุชุฑุจุท ููู ุงูุฅููุงู ุจุณููู ุงูุญูุงุฉ ุงูููููุฉ.
        </p>
      </div>
      <div class="grid grid-2">
        <div class="card shadow" style="display:grid;place-items:center;padding:24px;font-weight:800">ุงูุฅููุงู</div>
        <div class="card shadow" style="display:grid;place-items:center;padding:24px;font-weight:800">ุงูุชูุงุฒู</div>
        <div class="card shadow" style="display:grid;place-items:center;padding:24px;font-weight:800">ุงููุนู</div>
        <div class="card shadow" style="display:grid;place-items:center;padding:24px;font-weight:800">ุงูููู</div>
      </div>
    </div>
  </section>

  <!-- ุงูุงุฑุชุจุงุท ุจุฑุคูุฉ 2030 -->
  <section class="section hidden" data-route="vision">
    <div class="card shadow" style="padding:22px;background:linear-gradient(90deg,var(--beige),#fff)">
      <h2 style="margin:0 0 8px;font-size:28px;color:var(--ink);font-weight:900">ุงูุงุฑุชุจุงุท ุจุฑุคูุฉ 2030</h2>
      <p class="muted">ููุตุฉ ุฅููุงูู ุชูุฌุณูุฏ ูุณุชูุฏูุงุช ุงูุฑุคูุฉ ุนุจุฑ ุซูุงุซุฉ ูุญุงูุฑ ุงุณุชุฑุงุชูุฌูุฉ:</p>

      <div class="grid grid-3 section">
        <div class="card" style="padding:16px">
          <h4 style="margin:0 0 8px">๐๏ธ ุชุนุฒูุฒ ุงูููู ุงูุฅุณูุงููุฉ ูุงููููุฉ ุงููุทููุฉ</h4>
          <ul class="list">
            <li>ุชุนุฒูุฒ ููู ุงููุณุทูุฉ ูุงูุชุณุงูุญ</li>
            <li>ุชุนุฒูุฒ ููู ุงูุฅุชูุงู ูุงูุงูุถุจุงุท</li>
            <li>ุชุนุฒูุฒ ููู ุงูุนุฏุงูุฉ ูุงูุดูุงููุฉ</li>
            <li>ุชุนุฒูุฒ ููู ุงูุนุฒููุฉ ูุงููุซุงุจุฑุฉ</li>
          </ul>
          <div class="pill warn">ุชุฑุณูุฎ ุงูุฅููุงู ูุงููููุฉ ุงูุฅูุฌุงุจูุฉ ูู ุณููู ุงููุฑุฏ ูุงููุฌุชูุน.</div>
        </div>

        <div class="card" style="padding:16px">
          <h4 style="margin:0 0 8px">๐ซ ุชูููู ุญูุงุฉ ุนุงูุฑุฉ ูุตุญูุฉ</h4>
          <ul class="list">
            <li>ุชุนุฒูุฒ ููุท ุญูุงุฉ ุตุญู</li>
            <li>ุงูุงุฑุชูุงุก ุจุฌูุฏุฉ ุงูุญูุงุฉ ูู ุงููุฏู</li>
            <li>ุชุนุฒูุฒ ุงูููุงูุฉ ูู ุงููุฎุงุทุฑ ุงูุตุญูุฉ</li>
            <li>ุฏุนู ุงูุซูุงูุฉ ูุงูุชุฑููู</li>
          </ul>
          <div class="pill ok">ูุฌุชูุน ูุชูุงุฒู ูุนูุด ุญูุงุฉ ุตุญูุฉ ูุฑูุญูุฉ ูุชูุงููุฉ.</div>
        </div>

        <div class="card" style="padding:16px">
          <h4 style="margin:0 0 8px">๐ค ุชูููู ุงููุณุคูููุฉ ุงูุงุฌุชูุงุนูุฉ</h4>
          <ul class="list">
            <li>ุชุนุฒูุฒ ููุงู ุงูุฃูุฑุงุฏ ูุงูุดุฑูุงุช ุจุฏูุฑูู ุงููุฌุชูุนู</li>
            <li>ุชูููู ุงูููุธูุงุช ุบูุฑ ุงูุฑุจุญูุฉ ูุชุญููู ุฃุซุฑ ุฃุนูู</li>
          </ul>
          <div class="pill warn">ูุฌุชูุน ูุชูุงูู ูุดุงุฑู ุจูุงุนููุฉ ูู ุงูุชูููุฉ ุงููุณุชุฏุงูุฉ.</div>
        </div>
      </div>

      <div class="card" style="padding:16px">
        <h4 style="margin:0 0 8px">ููู ุชุฑุชุจุท ููููุงุช ุงูููุตุฉ ุจูุญุงูุฑ ุงูุฑุคูุฉุ</h4>
        <div class="grid grid-3">
          <div class="pill">ุงูุชูููู ุงูุฐุงุชู โ ูุนุฒุฒ ุงูููู ุงูุฅุณูุงููุฉ</div>
          <div class="pill">ูุชุงุฆุฌ ุงููุนู ูุงููุชุงุจุนุฉ โ ุชุฏุนู ุฌูุฏุฉ ุงูุญูุงุฉ</div>
          <div class="pill">ุงููุดุงุฑูุฉ ุงููุฌุชูุนูุฉ ูุจุฑุงูุฌ ุงูุดุฑุงูุฉ โ ุชูููู ุงููุณุคูููุฉ ุงูุงุฌุชูุงุนูุฉ</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ุงูุชูููู -->
  <section class="section hidden" data-route="assessment">
    <div class="card shadow" style="overflow:hidden">
      <div style="padding:20px;background:linear-gradient(90deg,var(--beige),#fff)">
        <h2 style="margin:0 0 6px;font-size:28px;color:var(--ink);font-weight:900">ุงูุชูููู ุงูุฐุงุชู</h2>
        <p class="muted">ุญุฑูู ุงููุคุดุฑุงุช ุฃูููุงุ ููู ุชุธูุฑ ุงููุชุงุฆุฌ ูุจู ุจุฏุก ุงูุชูููู.</p>
      </div>

      <div class="grid grid-2" style="padding:18px" id="sliders"></div>

      <div style="padding:0 18px 18px;display:flex;gap:10px;flex-wrap:wrap">
        <button class="btn btn-ghost" id="howWorks">ููู ูุนูู ุงูุชููููุ</button>
        <button class="btn" style="background:var(--blue);color:#fff" id="showResults">ุงุณุชุนุฑุงุถ ุงููุชุงุฆุฌ</button>
      </div>
      <div id="msg" class="section hidden" style="padding:0 18px 18px"></div>
    </div>
  </section>

  <!-- ุงููุชุงุฆุฌ -->
  <section class="section hidden" data-route="results">
    <div class="card shadow" style="overflow:hidden">
      <div style="padding:20px;background:linear-gradient(90deg,var(--beige),#fff)">
        <h2 style="margin:0 0 6px;font-size:28px;color:var(--ink);font-weight:900">ุงููุชุงุฆุฌ</h2>
        <p class="muted">ุณูููู ูุงูููุฒ ููุฑู ูุงุณูู ุจุตุฑููุง ูุชุญููู ููุฌุฒ.</p>
      </div>

      <div class="grid grid-2" style="padding:18px">
        <!-- Hawkins -->
        <div class="chart">
          <h4 style="margin:0 0 8px">ููุถุนู ุงูุชูุฑูุจู ุนูู ุณูููู ูุงูููุฒ</h4>
          <div class="area" id="area"></div>
          <div class="legend">
            <span>ุฎุฒู</span><span>ุญุฒู</span><span>ุฎูู</span><span>ุบุถุจ</span><span>ุดุฌุงุนุฉ</span><span>ุงุณุชุนุฏุงุฏ</span><span>ูุจูู</span><span>ูุญุจุฉ</span><span>ูุฑุญ</span><span>ุณูุงู</span>
          </div>
          <div id="hawkinsInfo" class="small" style="margin-top:8px;color:#475569"></div>
        </div>

        <!-- Maslow -->
        <div class="chart">
          <h4 style="margin:0 0 8px">ููุถุนู ูู ูุฑู ูุงุณูู</h4>
          <div class="bar"><span id="m1" style="width:0%"></span></div>
          <div class="bar"><span id="m2" style="width:0%"></span></div>
          <div class="bar"><span id="m3" style="width:0%"></span></div>
          <div class="bar"><span id="m4" style="width:0%"></span></div>
          <div class="bar"><span id="m5" style="width:0%"></span></div>
          <div class="ticks"><span>ููุณููููุฌู</span><span>ุฃูุงู</span><span>ุงูุชูุงุก</span><span>ุชูุฏูุฑ</span><span>ุชุญููู ุฐุงุช</span></div>
          <div id="maslowInfo" class="small" style="margin-top:8px;color:#475569"></div>
        </div>
      </div>

      <div style="padding:0 18px 18px;color:#334155;line-height:1.9">
        ุงูุชุญููู ุงูููุฌุฒ: ุชุนูุณ ุงูุฏุฑุฌุฉ ุชูุงุฒููุง ุนุงููุง ูู ูุคุดุฑุงุช (ุงูุฐูุฑุ ุงูุชููุฑุ ุงูุชูููุ ุงูุตุจุฑุ ุงูุดูุฑ). ููุตุญ ุจุฎุทุฉ ุฃุณุจูุนูุฉ ุตุบูุฑุฉ ูุงุจูุฉ ููููุงุณ ูุฑูุน ูุณุชูู ุงููุนู ุงูุนุงุทูู ูุงูุณูููู.
        <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn btn-ghost" id="backToAssessment">โฉ๏ธ ุงูุนูุฏุฉ ููุชูููู</button>
          <button class="btn" style="background:var(--blue);color:#fff" onclick="go('partners')">ุงุณุชูุดุงู ุดุฑูุงุคูุง</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ุดุฑูุงุคูุง -->
  <section class="section hidden" data-route="partners">
    <div class="card shadow" style="padding:22px">
      <h2 style="margin:0 0 6px;font-size:28px;color:var(--ink);font-weight:900">ุดุฑูุงุคูุง</h2>
      <p class="muted">ููุงุฐุฌ ูุดุนุงุฑุงุช ุดุฑูุงุก ุฏุงุนููู ููููุตุฉ. ููููู ุงุณุชุจุฏุงููุง ูุงุญููุง ุจุงููููุงุช ุงูุฑุณููุฉ.</p>
      <div class="partners section">
        <div class="partner">VISION2030</div>
        <div class="partner">TELBIYA</div>
        <div class="partner">UOH</div>
        <div class="partner">HCCI</div>
        <div class="partner">Partner</div>
        <div class="partner">Partner</div>
      </div>
    </div>
  </section>

  <!-- ุชูุงุตู ูุนูุง -->
  <section class="section hidden" data-route="contact">
    <div class="card shadow" style="overflow:hidden">
      <div style="padding:20px;background:linear-gradient(90deg,var(--beige),#fff)">
        <h2 style="margin:0 0 6px;font-size:28px;color:var(--ink);font-weight:900">ุชูุงุตู ูุนูุง</h2>
        <p class="muted">ูุณุนุฏ ุจุฑุณุงูุชู ูุงูุชุฑุงุญุงุชู.</p>
      </div>
      <div class="grid grid-2" style="padding:18px">
        <div class="grid">
          <input class="pill" placeholder="ุงูุงุณู" />
          <input class="pill" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู" type="email" />
          <textarea class="pill" rows="6" placeholder="ูุต ุงูุฑุณุงูุฉ"></textarea>
          <button class="btn" style="background:var(--blue);color:#fff">ุฅุฑุณุงู</button>
        </div>
        <div class="small muted" style="line-height:2">
          <div>๐ 0000 000 555</div>
          <div>โ๏ธ contact@imani.sa</div>
        </div>
      </div>
    </div>
  </section>
</main>

<footer class="footer">
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;padding:16px 0;gap:12px;flex-wrap:wrap">
    <div><b>ุฅููุงูู</b> โ ููุตุฉ ูุนู ุฅููุงูู ูุนุงุตุฑ</div>
    <div class="muted">ยฉ ุฌููุน ุงูุญููู ูุญููุธุฉ ูุดุฑูุฉ ุชูุจูุฉ ููุจุญุซ ูุงูุชุทููุฑ</div>
  </div>
</footer>

<script>
  /* --------------------- Router & Nav --------------------- */
  const routes = [
    {key:'home', label:'ุงูุฑุฆูุณูุฉ'},
    {key:'vision', label:'ุงูุงุฑุชุจุงุท ุจุฑุคูุฉ 2030'},
    {key:'assessment', label:'ุงูุชูููู'},
    {key:'results', label:'ุงููุชุงุฆุฌ'},
    {key:'partners', label:'ุดุฑูุงุคูุง'},
    {key:'contact', label:'ุชูุงุตู ูุนูุง'}
  ];
  const nav = document.getElementById('nav');
  routes.forEach(r=>{
    const b=document.createElement('button'); b.textContent=r.label; b.onclick=()=>go(r.key);
    nav.appendChild(b);
  });
  function go(key){
    document.querySelectorAll('[data-route]').forEach(s=>s.classList.add('hidden'));
    const el=document.querySelector(`[data-route="${key}"]`);
    if(el) el.classList.remove('hidden');
    [...nav.children].forEach((b,i)=>b.classList.toggle('active', routes[i].key===key));
    window.scrollTo({top:0,behavior:'smooth'});
    if(key!=='home') audioPauseSoft();
    history.replaceState(null,'',`#${key}`);
  }
  window.addEventListener('load',()=>{
    go(location.hash.replace('#','')||'home');
  });

  /* --------------------- Audio (Abdulbasit) --------------------- */
  const audio = document.getElementById('recitation');
  const audioBtn = document.getElementById('audioBtn');
  let audioOn=false;
  function audioPauseSoft(){ if(!audio.paused){ audio.pause(); audioOn=false; audioBtn.textContent='๐ ุชุดุบูู ุงูุชูุงูุฉ'; } }
  audioBtn.addEventListener('click', async ()=>{
    try{
      if(!audioOn){ await audio.play(); audioOn=true; audioBtn.textContent='๐ ุฅููุงู ุงูุชูุงูุฉ'; }
      else{ audio.pause(); audioOn=false; audioBtn.textContent='๐ ุชุดุบูู ุงูุชูุงูุฉ'; }
    }catch(e){ alert('ุถุน ููู ุงูุชูุงูุฉ ูู: audio/abdulbasit.mp3 ุฃู ุงุณูุญ ุจุงูุชุดุบูู ูู ุงููุชุตูุญ.'); }
  });

  // ุฒุฑ ุงุจุฏุฃ ุงูุชูููู
  document.getElementById('startAssessment').addEventListener('click',()=>go('assessment'));

  /* --------------------- Assessment --------------------- */
  const slidersHost=document.getElementById('sliders');
  const items=['ุญุถูุฑ ุงูุฐูุฑ','ุงูุชููุฑ','ุงูุชููู','ุงูุตุจุฑ','ุงูุดูุฑ'];
  const answers={};
  items.forEach((name,i)=>{
    const wrap=document.createElement('div'); wrap.className='grid';
    const head=document.createElement('div'); head.style.display='flex'; head.style.justifyContent='space-between'; head.style.alignItems='center';
    head.innerHTML=`<div style="font-weight:700">${name}</div><div class="small muted" id="v${i}">0</div>`;
    const input=document.createElement('input'); input.type='range'; input.min=0; input.max=5; input.step=1; input.value=0; input.className='range';
    input.addEventListener('input',()=>{ answers[name]=+input.value; document.getElementById('v'+i).textContent=input.value; });
    const ticks=document.createElement('div'); ticks.className='ticks'; ticks.innerHTML='<span>0</span><span>5</span>';
    wrap.append(head,input,ticks); slidersHost.appendChild(wrap);
  });

  const msg=document.getElementById('msg');
  document.getElementById('howWorks').addEventListener('click',()=>{
    msg.classList.remove('hidden');
    msg.innerHTML='<div class="pill">ุญุฑูู ูู ูุคุดุฑ ูู 0 ุฅูู 5 ุจุญุณุจ ูุงูุนู ุงูุญุงูู. ูุญุณุจ ุฏุฑุฌุฉ ูุนู ูุฑูุจุฉ ููุฑุจุทูุง ุจุณูููู ูุงูููุฒ ูุทุจูุงุช ูุงุณูู. ููููู ุฅุนุงุฏุฉ ุงูุชูููู ูุงุญููุง ููููุงุฑูุฉ.</div>';
  });

  document.getElementById('showResults').addEventListener('click',()=>{
    const started = Object.values(answers).some(v=>v>0);
    if(!started){
      msg.classList.remove('hidden');
      msg.innerHTML='<div class="warn">ูุฌุจ ุงูุจุฏุก ุจุชุญุฑูู ุงููุคุดุฑุงุช ูุจู ุงุณุชุนุฑุงุถ ุงููุชุงุฆุฌ.</div>';
      return;
    }
    updateResults();
    go('results');
  });

  /* --------------------- Results (Hawkins & Maslow) --------------------- */
  const hawkinsLevels = [
    { name:'ุฎุฒู', value:20 },{ name:'ุญุฒู', value:75 },{ name:'ุฎูู', value:100 },
    { name:'ุบุถุจ', value:150 },{ name:'ุดุฌุงุนุฉ', value:200 },{ name:'ุงุณุชุนุฏุงุฏ', value:310 },
    { name:'ูุจูู', value:350 },{ name:'ูุญุจุฉ', value:500 },{ name:'ูุฑุญ', value:540 },{ name:'ุณูุงู', value:600 }
  ];
  function totalScore(){
    const vals = Object.values(answers);
    const s = vals.reduce((a,b)=>a+b,0);
    const pct = Math.round( (s / (items.length * 5)) * 100 );
    return pct;
  }
  function hawkinsIndex(score){
    const idx = Math.min(hawkinsLevels.length-1, Math.floor((score/100) * (hawkinsLevels.length-1)));
    return idx;
  }
  function maslowLevel(score){
    if(score<20) return 1;
    if(score<40) return 2;
    if(score<60) return 3;
    if(score<80) return 4;
    return 5;
  }
  function updateResults(){
    const score = totalScore();
    const hIdx = hawkinsIndex(score);
    const mLvl = maslowLevel(score);

    // Area (simple marker)
    const area = document.getElementById('area');
    area.innerHTML='';
    const marker = document.createElement('div');
    marker.style.position='absolute';
    marker.style.bottom='10px';
    marker.style.left = (hIdx/(hawkinsLevels.length-1))*100 + '%';
    marker.style.transform='translateX(-50%)';
    marker.style.width='10px'; marker.style.height='10px';
    marker.style.background='var(--ink)'; marker.style.borderRadius='999px';
    marker.style.boxShadow='0 0 0 6px rgba(15,42,50,.15)';
    area.appendChild(marker);

    document.getElementById('hawkinsInfo').textContent =
      `ุฏุฑุฌุชู ุงูุฅุฌูุงููุฉ: ${score} / 100 โ ุฃูุฑุจ ูุณุชูู: ${hawkinsLevels[hIdx].name}.`;

    // Maslow bars
    for(let i=1;i<=5;i++){
      document.getElementById('m'+i).style.width = (i<=mLvl? '100%':'20%');
      document.getElementById('m'+i).style.background = i<=mLvl? 'var(--gold)':'#e9dec7';
    }
    const names=['ููุณููููุฌู','ุฃูุงู','ุงูุชูุงุก','ุชูุฏูุฑ','ุชุญููู ุฐุงุช'];
    document.getElementById('maslowInfo').textContent = `ูุณุชูุงู ุงูุญุงูู ุงูููุชุฑุญ: ${names[mLvl-1]}.`;
  }
  document.getElementById('backToAssessment').addEventListener('click',()=>go('assessment'));

  /* --------------------- Build Nav initially --------------------- */
  function initNavActive(){
    const key = location.hash.replace('#','') || 'home';
    [...nav.children].forEach((b,i)=>b.classList.toggle('active', routes[i].key===key));
  }
  initNavActive();

  /* --------------------- PWA: Dynamic manifest + SW --------------------- */
  (function makePWA(){
    // Manifest
    const manifest = {
      name: "ุฅููุงูู - ููุตุฉ ูุนู ุฅููุงูู",
      short_name: "ุฅููุงูู",
      start_url:"./",
      display:"standalone",
      dir:"rtl",
      lang:"ar",
      background_color:"#e9dec7",
      theme_color:"#0f6781",
      icons:[
        {src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='192' height='192'><rect width='100%' height='100%' fill='%230f6781'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' font-size='110' fill='white'>ุฅ</text></svg>", sizes:"192x192", type:"image/svg+xml"},
        {src:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='512' height='512'><rect width='100%' height='100%' fill='%230f6781'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' font-size='300' fill='white'>ุฅ</text></svg>", sizes:"512x512", type:"image/svg+xml", purpose:"maskable any"}
      ]
    };
    const mBlob = new Blob([JSON.stringify(manifest)], {type:'application/manifest+json'});
    const mURL = URL.createObjectURL(mBlob);
    const link = document.createElement('link'); link.rel='manifest'; link.href=mURL; document.head.appendChild(link);

    // Service Worker (cache this single file)
    const swCode = `
      const CACHE = 'imani-v1';
      self.addEventListener('install', e=>{
        e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['./'])));
      });
      self.addEventListener('activate', e=>{
        e.waitUntil(caches.keys().then(keys=>Promise.all(keys.map(k=>k!==CACHE && caches.delete(k)))));
      });
      self.addEventListener('fetch', e=>{
        e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)));
      });
    `;
    if('serviceWorker' in navigator){
      const swBlob = new Blob([swCode], {type:'text/javascript'});
      const swURL = URL.createObjectURL(swBlob);
      navigator.serviceWorker.register(swURL).catch(()=>{});
    }
  })();

  /* --------------------- Replace placeholders with real PNGs (optional) --------------------- */
  // ุฅู ุฑุบุจุช ุจูุถุน ุงูุตูุฑ ุงูุฑุณููุฉ ุฏุงุฎู ููุณ ุงูููู (Base64)ุ ุงุณุชุจุฏู ุงูู SVGs ุฃุนูุงู.
  // ุฃู ุถุน ูููุงุช PNG ุจุฌุงูุจ ูุฐุง ุงูููู ูุนุฏูู ุงูุณุทุฑูู ุงูุชุงูููู:
  // document.getElementById('visionLogo').innerHTML = '<img src="Vision2030.png" alt="ุฑุคูุฉ ุงูุณุนูุฏูุฉ 2030" style="height:24px" />';
  // document.getElementById('talbiyaLogo').innerHTML = '<img src="talbiya.png" alt="ูุจุงุฏุฑุฉ ุชูุจูุฉ" style="height:28px" />';
</script>

</body>
</html>
